(()=>{var e=document.querySelector(".popup_type_edit"),t=document.querySelector(".popup_type_add"),r=document.querySelector(".popup_type_image"),n=document.querySelectorAll(".popup__toggle"),o=document.querySelector(".profile__edit-button"),c=document.querySelector(".profile__add-button"),i=(document.querySelector(".popup__button"),document.querySelector(".popup__form")),u=t.querySelectorAll(".popup__form-item"),p=e.querySelector("#name"),a=e.querySelector("#bio"),d=t.querySelector("#place"),s=t.querySelector("#link"),l=r.querySelector(".popup__image"),_=r.querySelector(".popup__image-capture"),m=document.querySelector(".profile__name"),f=document.querySelector(".profile__bio"),y=document.querySelector(".cards-grid__template").content,v=document.querySelector(".cards-grid__list");function g(e){e.classList.add("popup_opened"),e.addEventListener("click",(function(t){t.target.classList.contains("popup_opened")&&q(e)})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&q(e)}))}function q(e){e.classList.remove("popup_opened")}function S(e,t){var n=y.querySelector(".cards-grid__item").cloneNode(!0),o=n.querySelector(".cards-grid__image");return n.querySelector(".cards-grid__title").textContent=e,o.setAttribute("src",t),o.setAttribute("alt",e),o.addEventListener("click",(function(){var n,o;n=t,o=e,l.setAttribute("src",n),l.setAttribute("alt",o),_.textContent=o,g(r)})),n.querySelector(".cards-grid__like").addEventListener("click",(function(e){e.target.classList.toggle("cards-grid__like_active")})),n.querySelector(".cards-grid__delete-card").addEventListener("click",(function(e){e.target.closest(".cards-grid__item").remove()})),n}n.forEach((function(e){return e.addEventListener("click",(function(e){e.target.closest(".popup").classList.remove("popup_opened")}))})),o.addEventListener("click",(function(){g(e),p.value=m.textContent,a.value=f.textContent})),c.addEventListener("click",(function(){return g(t)})),i.addEventListener("submit",(function(t){t.preventDefault(),m.textContent=p.value,f.textContent=a.value,q(e)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){return v.append(S(e.name,e.link))})),t.addEventListener("submit",(function(e){e.preventDefault(),v.prepend(S(d.value,s.value)),q(t),u.forEach((function(e){return e.value=""}))})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){Array.from(e.querySelectorAll(".popup__form-item")).forEach((function(t){t.addEventListener("input",(function(){!function(e,t){t.validity.valid?function(e,t){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("popup__form-item_type_error"),r.classList.remove("popup__form-item-error_type_active"),r.textContent=""}(e,t):function(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.add("popup__form-item_type_error"),n.textContent=r,n.classList.add("popup__form-item-error_type_active")}(e,t,t.validationMessage)}(e,t)}))}))}(e)}))})();